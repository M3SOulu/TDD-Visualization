<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <style>
            .axis path,
            .axis line {
               fill: none;
               stroke: red;
               shape-rendering: crispEdges;
            }

            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            } 
        </style>
    </head>
    <body>
        <script type="text/javascript">
            var dataset = [ 5, 10, 15, 20, 21, 25, 26, 28, 30, 31,
                32, 34, 38, 40, 42, 45, 46, 47, 49, 50 ];
            var svgHeigth = 300;
            var svgWidth = 500;
            var padding = 30;
            var barPadding = 8;
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", svgWidth)
                        .attr("height", svgHeigth);
            var xScale = d3.scale.linear()
                           .domain([0,480])
                           .range([0,480]);
            var yScale = d3.scale.linear()
                           .domain([100,0])
                           .range([0, 260]);       
            var xAxis =  d3.svg.axis()
                           .scale(xScale)
                           .orient("bottom")
                           .ticks(15);
            var yAxis = d3.svg.axis()
                            .scale(yScale)
                            .orient("left")
                            .ticks(5);
            svg.append("g")
               .attr("class", "axis")
               .attr("transform", "translate(25," + (svgHeigth - padding + 5 ) + ")")
               .call(xAxis);
            svg.append("g")
               .attr("class", "axis")
               .attr("transform", "translate(" + padding + ",14)")
               .call(yAxis);
            svg.selectAll("rect")
                .data(dataset)
                .enter()
                .append("rect")
                .attr("x", function(d, i) {
                    return i * 21 +31;  //Bar width of 20 plus 1 for padding
                })
                .attr("y", function(d) {
                    return 255 - d *6 + 20;  //Height minus data value
                })
                .attr("width", function(d, i) {
                    return (svgWidth   / dataset.length - barPadding);  //Bar width of 20 plus 1 for padding
                })
                .attr("height", function(d) {
                    return d * 6;
                })
                .attr("fill", function(d) {
                     return "rgb(0," + (d + 10) + ", " + (d * 3) + ")";
                })
                .on("click", function() {
                    console.log("rect");
                    d3.event.stopPropagation();
                });
            svg.selectAll("text")
               .data(dataset)
               .enter()
               .append("text")
               .text(function(d) {
                    return d;
               })
               .attr("x", function(d, i) {
                    return i * 21 +31;
               })
               .attr("y", function(d) {
                    return svgHeigth - (d * 4);
               })
               .attr("font-family", "sans-serif")
               .attr("font-size", "11px")
               .attr("fill", "white");
        </script>
    </body>
</html>
